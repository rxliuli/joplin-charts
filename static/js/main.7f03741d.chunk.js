(this["webpackJsonpjoplin-charts"]=this["webpackJsonpjoplin-charts"]||[]).push([[0],{225:function(e,t,a){"use strict";var n=a(441),r=a(442),o=a(129),s=a(288),i=a(443),l=a(1),c=a(282),u=a.n(c),m=a(283),d=a(36),g=a(444),h=a(445),p=a(26),b=a(28),v=a(75);const f={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"The verification is successful, and you are about to enter the homepage",errorMsg:"Verification failed, please check whether the authorization token and port number are correct",settingFormHeader:"Settings page",tokenLabel:"Token",tokenErrorRequiredMsg:"Token is required",portLabel:"Port",portErrorRequiredMsg:"Port is required",submitText:"Submit"}},"zh-CN":{translation:{successMsg:"\u9a8c\u8bc1\u6210\u529f\uff0c\u5373\u5c06\u8fdb\u5165\u4e3b\u9875",errorMsg:"\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6388\u6743 token \u4ee4\u724c\u4e0e\u7aef\u53e3\u53f7\u662f\u5426\u6b63\u786e",settingFormHeader:"\u8bbe\u7f6e\u9875",tokenLabel:"\u6388\u6743 Token \u4ee4\u724c",tokenErrorRequiredMsg:"token \u662f\u5fc5\u586b\u9879",portLabel:"\u7aef\u53e3",portErrorRequiredMsg:"\u7aef\u53e3\u662f\u5fc5\u586b\u9879",submitText:"\u63d0\u4ea4"}}}};t.a=()=>{const e=Object(g.a)(()=>b.a.init(f),[]),{register:t,handleSubmit:a,errors:c}=Object(m.a)({defaultValues:{port:41184}}),[,y]=Object(h.a)("settingForm"),k=Object(p.f)(),{success:E,error:w}=Object(v.a)();return l.createElement(l.Fragment,null,e.value&&l.createElement(n.a,{container:!0,justify:"center",alignItems:"center",className:u.a.container},l.createElement(r.a,{maxWidth:"xs"},l.createElement(o.a,{component:"h1",variant:"h5"},b.a.t("settingFormHeader")),l.createElement("form",{onSubmit:a((async function(e){console.log("handleSubmit: ",e);try{d.b.token=e.token,d.b.port=e.port,await d.d.list(["id"]),y(d.b),E(b.a.t("successMsg")),k.push("/")}catch(t){w(b.a.t("errorMsg"))}}))},l.createElement(s.a,{fullWidth:!0,name:"token",label:b.a.t("tokenLabel"),autoFocus:!0,error:!!c.token,inputRef:t({required:b.a.t("tokenErrorRequiredMsg")}),helperText:c.token?c.token.message:" "}),l.createElement(s.a,{fullWidth:!0,name:"port",label:b.a.t("portLabel"),error:!!c.port,inputRef:t({required:b.a.t("portErrorRequiredMsg")}),helperText:c.port?c.port.message:" "}),l.createElement(i.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},b.a.t("submitText"))))))}},226:function(e,t){},281:function(e,t,a){"use strict";var n=a(225);a.d(t,"default",(function(){return n.a}));a(226)},282:function(e,t,a){e.exports={container:"JoplinSetting_container__3qmxA"}},285:function(e,t,a){e.exports={root:"Home_root__y74vd"}},305:function(e,t,a){e.exports=a(439)},439:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(23),s=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(26),l=a(286),c=a(36);const u=new class{async countList(){const e=await c.e.list();return await Promise.all(e.map(async e=>({id:e.id,tag:e.title,count:(await c.e.notesByTagId(e.id)).length})))}};var m=a(508),d=a(136),g=a(28),h=a(75);const p={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"Successfully loaded the joplin tag list",errorMsg:"Failed to load joplin tag list"}},"zh-CN":{translation:{successMsg:"Joplin \u6807\u7b7e\u5217\u8868\u52a0\u8f7d\u6210\u529f",errorMsg:"Joplin \u6807\u7b7e\u5217\u8868\u52a0\u8f7d\u5931\u8d25"}}}};var b=()=>{const{success:e,error:t}=Object(h.a)();return Object(m.a)(async()=>{await g.a.init(p);try{const t=await u.countList();new d.WordCloud("container",{data:t,wordField:"tag",weightField:"count",colorField:"tag",random:()=>.5}).render(),e(g.a.t("successMsg"))}catch(a){console.error(a),t(g.a.t("errorMsg"))}}),n.createElement("div",{id:"container",style:{width:"100%",height:"100vh"}})},v=a(276),f=a.n(v);var y=a(277);a(222);const k={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"Succeeded in loading note diagram",errorMsg:"Failed to load note diagram"}},"zh-CN":{translation:{successMsg:"\u52a0\u8f7d\u7b14\u8bb0\u5173\u7cfb\u56fe\u6210\u529f",errorMsg:"\u52a0\u8f7d\u7b14\u8bb0\u5173\u7cfb\u56fe\u5931\u8d25"}}}};async function E(){const e=await c.d.list(["id","title","body"]),t=class{static convert(e){const t=new f.a,a=e.reduce((e,t)=>(e.set(t.id,t),e),new Map);function n(e){return t.parseInline(e.body,"")[0].children.filter(e=>{var t;return"link_open"===e.type&&(null===(t=e.attrGet("href"))||void 0===t?void 0:t.startsWith(":/"))}).map(e=>{var t;return null===(t=e.attrGet("href"))||void 0===t?void 0:t.substr(2)}).filter(e=>a.has(e)).map(e=>({id:e,title:a.get(e).title}))}return e.map(e=>({id:e.id,title:e.title,links:n(e)}))}}.convert(e);return{nodes:t.map(e=>{const t={id:e.id,label:e.title.startsWith("#")?e.title.replace("# ",""):e.title};return{data:t,...t,shape:"CircleNode",style:{nodeSize:24*(1+e.links.length)}}}),edges:t.flatMap(e=>e.links.map(t=>{const a={source:e.id,target:t.id};return{data:a,...a}}))}}var w=()=>{const[e,t]=Object(n.useState)({edges:[],nodes:[]}),{success:a,error:r}=Object(h.a)(),o=Object(i.f)();return Object(m.a)(async()=>{await g.a.init(k);try{const e=await E();t(e),a(g.a.t("successMsg"))}catch(e){r(g.a.t("errorMsg")),o.push("/setting")}}),n.createElement("div",{style:{height:"100vh"}},n.createElement(y.a,{data:e,layout:{name:"force",options:{preset:{name:"concentric"},centripetalOptions:{single:100,center:()=>({x:100,y:100})}}}}))},M=a(281),N=a(442),j=a(493),O=a(494),S=a(495),R=a(492),F=a(496),L=a(285),_=a.n(L),x=a(444),I=a(125);const T={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{settingRouteName:"Set up Joplin Token/Port",relationRouteName:"Relation chart",tagRouteName:"Tag Cloud",sunburstRouteName:"Note directory size analysis chart",timelineName:"timeline",chartList:"Chart list"}},"zh-CN":{translation:{settingRouteName:"\u8bbe\u7f6e Joplin Token/Port",relationRouteName:"\u5173\u7cfb\u56fe",tagRouteName:"\u6807\u7b7e\u4e91",sunburstRouteName:"\u7b14\u8bb0\u76ee\u5f55\u5927\u5c0f\u5206\u6790\u56fe",timelineName:"\u65f6\u95f4\u7ebf",chartList:"\u56fe\u8868\u5217\u8868"}}}},q=[{label:"settingRouteName",to:"/setting"},{label:"tagRouteName",to:"/tag"},{label:"relationRouteName",to:"/relation"},{label:"sunburstRouteName",to:"/sunburst"},{label:"timelineName",to:"/timeline"}];var C=()=>{const e=Object(x.a)(()=>g.a.init(T),[]);return n.createElement(n.Fragment,null,e.value&&n.createElement(N.a,{maxWidth:"sm",className:_.a.root},n.createElement(j.a,null,n.createElement(O.a,{title:g.a.t("chartList")}),n.createElement(S.a,null,n.createElement(R.a,{component:"nav"},q.map(e=>n.createElement(F.a,null,n.createElement(I.b,{to:e.to},g.a.t(e.label)))))))))},W=a(107);var z=()=>{const e=Object(W.b)();return Object(m.a)(async()=>{const t=(await c.c.list())[0],a=await c.d.create({title:"test title",body:"test body",parent_id:t.id});e.enqueueSnackbar(`Create note successfully: [${a.title}], The list of notes is: [${t.title}]`,{variant:"success",autoHideDuration:3e3})}),n.createElement("div",null,"CreateNoteDemo")};const J={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"The notebook list is loaded successfully",errorMsg:"Failed to load notebook list"}},"zh-CN":{translation:{successMsg:"\u7b14\u8bb0\u672c\u5217\u8868\u52a0\u8f7d\u6210\u529f",errorMsg:"\u7b14\u8bb0\u672c\u5217\u8868\u52a0\u8f7d\u5931\u8d25"}}}};var H=()=>{const{success:e,error:t}=Object(h.a)();return Object(m.a)(async()=>{await g.a.init(J);try{const t=await async function(){return{label:"root",children:(await c.c.list()).map((function e(t){var a;return{label:t.title,sum:t.note_count,children:null===(a=t.children)||void 0===a?void 0:a.map(e)}}))}}();e(g.a.t("successMsg"));new d.Sunburst("container",{data:t,type:"treemap",reflect:"y",seriesField:"sum",colorField:"label",innerRadius:.3,interactions:[{type:"element-active"}]}).render()}catch(a){t(g.a.t("errorMsg"))}}),n.createElement("div",{id:"container",style:{height:"100vh"}})},P=a(498),A=a(499),D=a(501),B=a(503),$=a(504),G=a(502),V=a(497),K=a(129),Q=a(505),U=a(443),X=a(500);const Y={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{openNoteAction:"Open in editor"}},"zh-CN":{translation:{openNoteAction:"\u5728\u7f16\u8f91\u5668\u4e2d\u6253\u5f00"}}}};var Z=()=>{const e=Object(x.a)(async()=>{const e=await c.d.list(["id","title","body","user_updated_time"]);return e.sort((e,t)=>t.user_updated_time-e.user_updated_time),e},[]);return Object(m.a)(async()=>{await g.a.init(Y)}),n.createElement(n.Fragment,null,e.loading?n.createElement(V.a,null):n.createElement(P.a,{align:"alternate"},e.value.map((e,t)=>n.createElement(A.a,null,n.createElement(X.a,null,n.createElement(K.a,{color:"textSecondary"},new Date(e.user_updated_time).toLocaleString())),n.createElement(D.a,null,n.createElement(G.a,{color:t%2===0?"primary":"secondary"}),n.createElement(B.a,null)),n.createElement($.a,null,n.createElement(j.a,null,n.createElement(S.a,null,n.createElement(K.a,{variant:"h5"},e.title.startsWith("#")?e.title.replace("# ",""):e.title)),n.createElement(Q.a,null,n.createElement(U.a,{onClick:()=>async function(e){await c.a.openAndWatch(e)}(e.id)},g.a.t("openNoteAction")))))))))};const ee=[{path:"/setting",component:M.default},{path:"/tag",component:b},{path:"/sunburst",component:H},{path:"/relation",component:w},{path:"/demo/create-note",component:z},{path:"/timeline",component:Z},{path:"/",component:C}];var te,ae,ne=a(445);class re{constructor(e){this.storage=e,this.clear=()=>{this.storage.clear()},this.getItem=e=>this.storage.getItem(e),this.key=e=>this.storage.key(e),this.removeItem=e=>{this.storage.removeItem(e)},this.setItem=(e,t)=>{this.storage.setItem(e,t)}}get length(){return this.storage.length}}const oe=function(e){const t=new Set(["storage","length","clear","getItem","setItem","removeItem","key"]);return new Proxy(new re(e),{get(e,a,n){if(t.has(a))return Reflect.get(e,a,n);try{return JSON.parse(e.getItem(a.toString()))}catch(r){return null}},set:(e,a,n,r)=>t.has(a)?Reflect.set(e,a,r):(e.setItem(a.toString(),void 0!==n&&null!==n?JSON.stringify(n):n),!0)})}(localStorage);c.b.token=null===(te=oe.settingForm)||void 0===te?void 0:te.token,c.b.port=null===(ae=oe.settingForm)||void 0===ae?void 0:ae.port;var se=()=>{const[e]=Object(ne.a)("settingForm"),t=Object(i.f)();return Object(m.a)(()=>{(null===e||void 0===e?void 0:e.token)&&(null===e||void 0===e?void 0:e.port)||t.push("/setting")}),Object(l.a)(ee)},ie=(a(438),a(506));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie.a,{locale:window.navigator.language},r.a.createElement(W.a,{maxSnack:3},r.a.createElement(I.a,null,r.a.createElement(se,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},75:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(107);function r(){const e=Object(n.b)();return{success(t){e.enqueueSnackbar(t,{variant:"success",autoHideDuration:3e3})},error(t){e.enqueueSnackbar(t,{variant:"error",autoHideDuration:3e3})}}}}},[[305,1,2]]]);
//# sourceMappingURL=main.7f03741d.chunk.js.map