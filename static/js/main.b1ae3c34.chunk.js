(this["webpackJsonpjoplin-charts"]=this["webpackJsonpjoplin-charts"]||[]).push([[0],{222:function(e,t,a){"use strict";var n=a(14),r=a(440),s=a(441),o=a(118),i=a(284),c=a(443),l=(a(1),a(278)),u=a.n(l),d=a(279),g=a(31),h=a(444),b=a(445),m=a(24),j=a(26),p=a(75);const v={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"The verification is successful, and you are about to enter the homepage",errorMsg:"Verification failed, please check whether the authorization token and port number are correct",settingFormHeader:"Settings page",tokenLabel:"Token",tokenErrorRequiredMsg:"Token is required",portLabel:"Port",portErrorRequiredMsg:"Port is required",submitText:"Submit"}},"zh-CN":{translation:{successMsg:"\u9a8c\u8bc1\u6210\u529f\uff0c\u5373\u5c06\u8fdb\u5165\u4e3b\u9875",errorMsg:"\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6388\u6743 token \u4ee4\u724c\u4e0e\u7aef\u53e3\u53f7\u662f\u5426\u6b63\u786e",settingFormHeader:"\u8bbe\u7f6e\u9875",tokenLabel:"\u6388\u6743 Token \u4ee4\u724c",tokenErrorRequiredMsg:"token \u662f\u5fc5\u586b\u9879",portLabel:"\u7aef\u53e3",portErrorRequiredMsg:"\u7aef\u53e3\u662f\u5fc5\u586b\u9879",submitText:"\u63d0\u4ea4"}}}};t.a=()=>{const e=Object(h.a)((()=>j.a.init(v)),[]),{register:t,handleSubmit:a,errors:l}=Object(d.a)({defaultValues:{port:41184}}),[,O]=Object(b.a)("settingForm"),f=Object(m.f)(),{success:x,error:y}=Object(p.a)();return Object(n.jsx)(n.Fragment,{children:e.value&&Object(n.jsx)(r.a,{container:!0,justify:"center",alignItems:"center",className:u.a.container,children:Object(n.jsxs)(s.a,{maxWidth:"xs",children:[Object(n.jsx)(o.a,{component:"h1",variant:"h5",children:j.a.t("settingFormHeader")}),Object(n.jsxs)("form",{onSubmit:a((async function(e){console.log("handleSubmit: ",e);try{g.b.token=e.token,g.b.port=e.port,await g.e.list({fields:[],limit:1}),O(g.b),x(j.a.t("successMsg")),f.push("/")}catch(t){y(j.a.t("errorMsg"))}})),children:[Object(n.jsx)(i.a,{fullWidth:!0,name:"token",label:j.a.t("tokenLabel"),autoFocus:!0,error:!!l.token,inputRef:t({required:j.a.t("tokenErrorRequiredMsg")}),helperText:l.token?l.token.message:" "}),Object(n.jsx)(i.a,{fullWidth:!0,name:"port",label:j.a.t("portLabel"),error:!!l.port,inputRef:t({required:j.a.t("portErrorRequiredMsg")}),helperText:l.port?l.port.message:" "}),Object(n.jsx)(c.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:j.a.t("submitText")})]})]})})})}},223:function(e,t){},277:function(e,t,a){"use strict";var n=a(222);a.d(t,"default",(function(){return n.a}));a(223)},278:function(e,t,a){e.exports={container:"JoplinSetting_container__3qmxA"}},281:function(e,t,a){e.exports={root:"Home_root__y74vd"}},439:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a(1),s=a.n(r),o=a(21),i=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(24),l=a(282),u=a(31);const d=new class{async countList(){const e=await u.a.pageToAllList(u.f.list);return await Promise.all(e.map((async e=>({id:e.id,tag:e.title,count:(await u.a.pageToAllList(u.f.notesByTagId,{id:e.id})).length}))))}};var g=a(507),h=a(130),b=a(26),m=a(75);const j={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"Successfully loaded the joplin tag list",errorMsg:"Failed to load joplin tag list"}},"zh-CN":{translation:{successMsg:"Joplin \u6807\u7b7e\u5217\u8868\u52a0\u8f7d\u6210\u529f",errorMsg:"Joplin \u6807\u7b7e\u5217\u8868\u52a0\u8f7d\u5931\u8d25"}}}};var p=()=>{const{success:e,error:t}=Object(m.a)();return Object(g.a)((async()=>{await b.a.init(j);try{const t=await d.countList();new h.WordCloud("container",{data:t,wordField:"tag",weightField:"count",colorField:"tag",random:()=>.5}).render(),e(b.a.t("successMsg"))}catch(a){console.error(a),t(b.a.t("errorMsg"))}})),Object(n.jsx)("div",{id:"container",style:{width:"100%",height:"100vh"}})},v=a(273),O=a.n(v);var f=a(274);a(221);const x={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"Succeeded in loading note diagram",errorMsg:"Failed to load note diagram"}},"zh-CN":{translation:{successMsg:"\u52a0\u8f7d\u7b14\u8bb0\u5173\u7cfb\u56fe\u6210\u529f",errorMsg:"\u52a0\u8f7d\u7b14\u8bb0\u5173\u7cfb\u56fe\u5931\u8d25"}}}};async function y(){const e=await u.a.pageToAllList(u.e.list,{fields:["id","title","body"]}),t=class{static convert(e){const t=new O.a,a=e.reduce(((e,t)=>(e.set(t.id,t),e)),new Map);function n(e){return t.parseInline(e.body,"")[0].children.filter((e=>{var t;return"link_open"===e.type&&(null===(t=e.attrGet("href"))||void 0===t?void 0:t.startsWith(":/"))})).map((e=>{var t;return null===(t=e.attrGet("href"))||void 0===t?void 0:t.substr(2)})).filter((e=>a.has(e))).map((e=>({id:e,title:a.get(e).title})))}return e.map((e=>({id:e.id,title:e.title,links:n(e)})))}}.convert(e);return{nodes:t.map((e=>{const t={id:e.id,label:e.title.startsWith("#")?e.title.replace("# ",""):e.title};return{data:t,...t,shape:"CircleNode",style:{nodeSize:24*Math.min(1+e.links.length,5)}}})),edges:t.flatMap((e=>e.links.map((t=>{const a={source:e.id,target:t.id};return{data:a,...a}}))))}}var k=()=>{const[e,t]=Object(r.useState)({edges:[],nodes:[]}),{success:a,error:s}=Object(m.a)(),o=Object(c.f)();return Object(g.a)((async()=>{await b.a.init(x);try{const e=await y();t(e),a(b.a.t("successMsg"))}catch(e){s(b.a.t("errorMsg")),o.push("/setting")}})),Object(n.jsx)("div",{style:{height:"100vh"},children:Object(n.jsx)(f.a,{data:e,layout:{name:"force",options:{preset:{name:"concentric"},preventOverlap:!0,centripetalOptions:{single:100,center:()=>({x:100,y:100})}}}})})},w=a(277),M=a(441),N=a(492),S=a(493),R=a(494),L=a(491),F=a(495),T=a(281),_=a.n(T),I=a(444),q=a(115);const C={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{settingRouteName:"Set up Joplin Token/Port",relationRouteName:"Relation chart",tagRouteName:"Tag Cloud",sunburstRouteName:"Note directory size analysis chart",timelineName:"timeline",chartList:"Chart list"}},"zh-CN":{translation:{settingRouteName:"\u8bbe\u7f6e Joplin Token/Port",relationRouteName:"\u5173\u7cfb\u56fe",tagRouteName:"\u6807\u7b7e\u4e91",sunburstRouteName:"\u7b14\u8bb0\u76ee\u5f55\u5927\u5c0f\u5206\u6790\u56fe",timelineName:"\u65f6\u95f4\u7ebf",chartList:"\u56fe\u8868\u5217\u8868"}}}},W=[{label:"settingRouteName",to:"/setting"},{label:"tagRouteName",to:"/tag"},{label:"relationRouteName",to:"/relation"},{label:"sunburstRouteName",to:"/sunburst"},{label:"timelineName",to:"/timeline"}];var A=()=>{const e=Object(I.a)((()=>b.a.init(C)),[]);return Object(n.jsx)(n.Fragment,{children:e.value&&Object(n.jsx)(M.a,{maxWidth:"sm",className:_.a.root,children:Object(n.jsxs)(N.a,{children:[Object(n.jsx)(S.a,{title:b.a.t("chartList")}),Object(n.jsx)(R.a,{children:Object(n.jsx)(L.a,{component:"nav",children:W.map((e=>Object(n.jsx)(F.a,{children:Object(n.jsx)(q.b,{to:e.to,children:b.a.t(e.label)})})))})})]})})})},z=a(104);var J=()=>{const e=Object(z.b)();return Object(g.a)((async()=>{const t=(await u.c.listAll())[0],a=await u.e.create({title:"test title",body:"test body",parent_id:t.id});e.enqueueSnackbar(`Create note successfully: [${a.title}], The list of notes is: [${t.title}]`,{variant:"success",autoHideDuration:3e3})})),Object(n.jsx)("div",{children:"CreateNoteDemo"})};const E={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"The notebook list is loaded successfully",errorMsg:"Failed to load notebook list"}},"zh-CN":{translation:{successMsg:"\u7b14\u8bb0\u672c\u5217\u8868\u52a0\u8f7d\u6210\u529f",errorMsg:"\u7b14\u8bb0\u672c\u5217\u8868\u52a0\u8f7d\u5931\u8d25"}}}};var H=()=>{const{success:e,error:t}=Object(m.a)();return Object(g.a)((async()=>{await b.a.init(E);try{const t=await async function(){return{label:"root",children:(await u.c.listAll()).map((function e(t){var a;return{label:t.title,sum:t.note_count,children:null===(a=t.children)||void 0===a?void 0:a.map(e)}}))}}();e(b.a.t("successMsg"));new h.Sunburst("container",{data:t,type:"treemap",reflect:"y",seriesField:"sum",colorField:"label",innerRadius:.3,interactions:[{type:"element-active"}]}).render()}catch(a){t(b.a.t("errorMsg"))}})),Object(n.jsx)("div",{id:"container",style:{height:"100vh"}})},D=a(497),P=a(498),B=a(500),$=a(502),G=a(503),V=a(501),K=a(496),Q=a(118),U=a(504),X=a(443),Y=a(499);const Z={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{openNoteAction:"Open in editor"}},"zh-CN":{translation:{openNoteAction:"\u5728\u7f16\u8f91\u5668\u4e2d\u6253\u5f00"}}}};var ee=()=>{const e=Object(I.a)((async()=>await u.a.pageToAllList(u.e.list,{fields:["id","title","body","user_updated_time"],order_by:"user_updated_time",order_dir:"DESC"})),[]);return Object(g.a)((async()=>{await b.a.init(Z)})),Object(n.jsx)(n.Fragment,{children:e.loading?Object(n.jsx)(K.a,{}):Object(n.jsx)(D.a,{align:"alternate",children:e.value.map(((e,t)=>Object(n.jsxs)(P.a,{children:[Object(n.jsx)(Y.a,{children:Object(n.jsx)(Q.a,{color:"textSecondary",children:new Date(e.user_updated_time).toLocaleString()})}),Object(n.jsxs)(B.a,{children:[Object(n.jsx)(V.a,{color:t%2===0?"primary":"secondary"}),Object(n.jsx)($.a,{})]}),Object(n.jsx)(G.a,{children:Object(n.jsxs)(N.a,{children:[Object(n.jsx)(R.a,{children:Object(n.jsx)(Q.a,{variant:"h5",children:e.title.startsWith("#")?e.title.replace("# ",""):e.title})}),Object(n.jsx)(U.a,{children:Object(n.jsx)(X.a,{onClick:()=>async function(e){await u.d.openAndWatch(e)}(e.id),children:b.a.t("openNoteAction")})})]})})]})))})})};const te=[{path:"/setting",component:w.default},{path:"/tag",component:p},{path:"/sunburst",component:H},{path:"/relation",component:k},{path:"/demo/create-note",component:J},{path:"/timeline",component:ee},{path:"/",component:A}];var ae,ne,re=a(445);class se{constructor(e){this.storage=e,this.clear=()=>{this.storage.clear()},this.getItem=e=>this.storage.getItem(e),this.key=e=>this.storage.key(e),this.removeItem=e=>{this.storage.removeItem(e)},this.setItem=(e,t)=>{this.storage.setItem(e,t)}}get length(){return this.storage.length}}const oe=function(e){const t=new Set(["storage","length","clear","getItem","setItem","removeItem","key"]);return new Proxy(new se(e),{get(e,a,n){if(t.has(a))return Reflect.get(e,a,n);try{return JSON.parse(e.getItem(a.toString()))}catch(r){return null}},set:(e,a,n,r)=>t.has(a)?Reflect.set(e,a,r):(e.setItem(a.toString(),void 0!==n&&null!==n?JSON.stringify(n):n),!0)})}(localStorage);u.b.token=null===(ae=oe.settingForm)||void 0===ae?void 0:ae.token,u.b.port=null===(ne=oe.settingForm)||void 0===ne?void 0:ne.port;var ie=()=>{const[e]=Object(re.a)("settingForm"),t=Object(c.f)();return Object(g.a)((()=>{(null===e||void 0===e?void 0:e.token)&&(null===e||void 0===e?void 0:e.port)||t.push("/setting")})),Object(l.a)(te)},ce=(a(438),a(505));i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(ce.a,{locale:window.navigator.language,children:Object(n.jsx)(z.a,{maxSnack:3,children:Object(n.jsx)(q.a,{children:Object(n.jsx)(ie,{})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)}))},75:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(104);function r(){const e=Object(n.b)();return{success(t){e.enqueueSnackbar(t,{variant:"success",autoHideDuration:3e3})},error(t){e.enqueueSnackbar(t,{variant:"error",autoHideDuration:3e3})}}}}},[[439,1,2]]]);
//# sourceMappingURL=main.b1ae3c34.chunk.js.map