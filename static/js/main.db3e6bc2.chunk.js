(this["webpackJsonpjoplin-charts"]=this["webpackJsonpjoplin-charts"]||[]).push([[0],{224:function(e,t,a){"use strict";var n=a(451),r=a(452),o=a(126),s=a(287),i=a(453),c=a(1),l=a(281),u=a.n(l),g=a(285),d=a(39),m=a(454),h=a(455),p=a(22),b=a(28),v=a(77);const f={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"The verification is successful, and you are about to enter the homepage",errorMsg:"Verification failed, please check whether the authorization token and port number are correct",settingFormHeader:"Settings page",tokenLabel:"Token",tokenErrorRequiredMsg:"Token is required",portLabel:"Port",portErrorRequiredMsg:"Port is required",submitText:"Submit"}},"zh-CN":{translation:{successMsg:"\u9a8c\u8bc1\u6210\u529f\uff0c\u5373\u5c06\u8fdb\u5165\u4e3b\u9875",errorMsg:"\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6388\u6743 token \u4ee4\u724c\u4e0e\u7aef\u53e3\u53f7\u662f\u5426\u6b63\u786e",settingFormHeader:"\u8bbe\u7f6e\u9875",tokenLabel:"\u6388\u6743 Token \u4ee4\u724c",tokenErrorRequiredMsg:"token \u662f\u5fc5\u586b\u9879",portLabel:"\u7aef\u53e3",portErrorRequiredMsg:"\u7aef\u53e3\u662f\u5fc5\u586b\u9879",submitText:"\u63d0\u4ea4"}}}};t.a=()=>{const e=Object(m.a)(()=>b.a.init(f),[]),{register:t,handleSubmit:a,errors:l}=Object(g.a)({defaultValues:{port:41184}}),[,k]=Object(h.a)("settingForm"),y=Object(p.f)(),{success:w,error:E}=Object(v.a)();return c.createElement(c.Fragment,null,e.value&&c.createElement(n.a,{container:!0,justify:"center",alignItems:"center",className:u.a.container},c.createElement(r.a,{maxWidth:"xs"},c.createElement(o.a,{component:"h1",variant:"h5"},b.a.t("settingFormHeader")),c.createElement("form",{onSubmit:a((async function(e){console.log("handleSubmit: ",e);try{d.a.token=e.token,d.a.port=e.port,await d.c.list(["id"]),k(d.a),w(b.a.t("successMsg")),y.push("/")}catch(t){E(b.a.t("errorMsg"))}}))},c.createElement(s.a,{fullWidth:!0,name:"token",label:b.a.t("tokenLabel"),autoFocus:!0,error:!!l.token,inputRef:t({required:b.a.t("tokenErrorRequiredMsg")}),helperText:l.token?l.token.message:" "}),c.createElement(s.a,{fullWidth:!0,name:"port",label:b.a.t("portLabel"),error:!!l.port,inputRef:t({required:b.a.t("portErrorRequiredMsg")}),helperText:l.port?l.port.message:" "}),c.createElement(i.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},b.a.t("submitText"))))))}},225:function(e,t){},280:function(e,t,a){"use strict";var n=a(224);a.d(t,"default",(function(){return n.a}));a(225)},281:function(e,t,a){e.exports={container:"JoplinSetting_container__a3I9p"}},283:function(e,t,a){e.exports={root:"Home_root__1wQR-"}},305:function(e,t,a){e.exports=a(449)},449:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(23),s=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(22),c=a(284),l=a(39);const u=new class{async countList(){const e=await l.d.list();return await Promise.all(e.map(async e=>({id:e.id,tag:e.title,count:(await l.d.notesByTagId(e.id)).length})))}};var g=a(504),d=a(133),m=a(28),h=a(77);const p={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"Successfully loaded the joplin tag list",errorMsg:"Failed to load joplin tag list"}},"zh-CN":{translation:{successMsg:"Joplin \u6807\u7b7e\u5217\u8868\u52a0\u8f7d\u6210\u529f",errorMsg:"Joplin \u6807\u7b7e\u5217\u8868\u52a0\u8f7d\u5931\u8d25"}}}};var b=()=>{const{success:e,error:t}=Object(h.a)();return Object(g.a)(async()=>{await m.a.init(p);try{const t=await u.countList();new d.WordCloud("container",{data:t,wordField:"tag",weightField:"count",colorField:"tag",random:()=>.5}).render(),e(m.a.t("successMsg"))}catch(a){console.error(a),t(m.a.t("errorMsg"))}}),n.createElement("div",{id:"container",style:{width:"100%",height:"100vh"}})},v=a(275),f=a.n(v);var k=a(276);a(221);const y={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"Succeeded in loading note diagram",errorMsg:"Failed to load note diagram"}},"zh-CN":{translation:{successMsg:"\u52a0\u8f7d\u7b14\u8bb0\u5173\u7cfb\u56fe\u6210\u529f",errorMsg:"\u52a0\u8f7d\u7b14\u8bb0\u5173\u7cfb\u56fe\u5931\u8d25"}}}};async function w(){const e=await l.c.list(["id","title","body"]),t=class{static convert(e){const t=new f.a,a=e.reduce((e,t)=>(e.set(t.id,t),e),new Map);function n(e){return t.parseInline(e.body,"")[0].children.filter(e=>{var t;return"link_open"===e.type&&(null===(t=e.attrGet("href"))||void 0===t?void 0:t.startsWith(":/"))}).map(e=>{var t;return null===(t=e.attrGet("href"))||void 0===t?void 0:t.substr(2)}).filter(e=>a.has(e)).map(e=>({id:e,title:a.get(e).title}))}return e.map(e=>({id:e.id,title:e.title,links:n(e)}))}}.convert(e);return{nodes:t.map(e=>{const t={id:e.id,label:e.title.startsWith("#")?e.title.replace("# ",""):e.title};return{data:t,...t,shape:"CircleNode",style:{nodeSize:24*(1+e.links.length)}}}),edges:t.flatMap(e=>e.links.map(t=>{const a={source:e.id,target:t.id};return{data:a,...a}}))}}var E=()=>{const[e,t]=Object(n.useState)({edges:[],nodes:[]}),{success:a,error:r}=Object(h.a)(),o=Object(i.f)();return Object(g.a)(async()=>{await m.a.init(y);try{const e=await w();t(e),a(m.a.t("successMsg"))}catch(e){r(m.a.t("errorMsg")),o.push("/setting")}}),n.createElement("div",{style:{height:"100vh"}},n.createElement(k.a,{data:e,layout:{name:"force",options:{preset:{name:"concentric"},centripetalOptions:{single:100,center:()=>({x:100,y:100})}}}}))},M=a(280),j=a(452),O=a(498),R=a(499),N=a(500),S=a(497),F=a(501),x=a(283),I=a.n(x),L=a(454);const C={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{settingRouteName:"Set up Joplin Token/Port",relationRouteName:"Relation chart",tagRouteName:"Tag Cloud",sunburstRouteName:"Note directory size analysis chart",chartList:"Chart list"}},"zh-CN":{translation:{settingRouteName:"\u8bbe\u7f6e Joplin Token/Port",relationRouteName:"\u5173\u7cfb\u56fe",tagRouteName:"\u6807\u7b7e\u4e91",sunburstRouteName:"\u7b14\u8bb0\u76ee\u5f55\u5927\u5c0f\u5206\u6790\u56fe",chartList:"\u56fe\u8868\u5217\u8868"}}}};var T=()=>{const e=Object(L.a)(()=>m.a.init(C),[]),t=Object(i.f)();return n.createElement(n.Fragment,null,e.value&&n.createElement(j.a,{maxWidth:"sm",className:I.a.root},n.createElement(O.a,null,n.createElement(R.a,{title:m.a.t("chartList")}),n.createElement(N.a,null,n.createElement(S.a,{component:"nav"},n.createElement(F.a,{button:!0,onClick:()=>t.push("/setting")},m.a.t("settingRouteName")),n.createElement(F.a,{button:!0,onClick:()=>t.push("/tag")},m.a.t("tagRouteName")),n.createElement(F.a,{button:!0,onClick:()=>t.push("/relation")},m.a.t("relationRouteName")),n.createElement(F.a,{button:!0,onClick:()=>t.push("/sunburst")},m.a.t("sunburstRouteName")))))))},q=a(38),W=a.n(q),J=a(61),_=a(105),z=function(){var e=Object(_.b)();return Object(g.a)(Object(J.a)(W.a.mark((function t(){var a,n,r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.list();case 2:return a=t.sent,n=a[0],t.next=6,l.c.create({title:"test title",body:"test body",parent_id:n.id});case 6:r=t.sent,e.enqueueSnackbar("Create note successfully: [".concat(r.title,"], The list of notes is: [").concat(n.title,"]"),{variant:"success",autoHideDuration:3e3});case 8:case"end":return t.stop()}}),t)})))),n.createElement("div",null,"CreateNoteDemo")};const H={lng:navigator.language,fallbackLng:"en",resources:{en:{translation:{successMsg:"The notebook list is loaded successfully",errorMsg:"Failed to load notebook list"}},"zh-CN":{translation:{successMsg:"\u7b14\u8bb0\u672c\u5217\u8868\u52a0\u8f7d\u6210\u529f",errorMsg:"\u7b14\u8bb0\u672c\u5217\u8868\u52a0\u8f7d\u5931\u8d25"}}}};var P=()=>{const{success:e,error:t}=Object(h.a)();return Object(g.a)(async()=>{await m.a.init(H);try{const t=await async function(){return{label:"root",children:(await l.b.list()).map((function e(t){var a;return{label:t.title,sum:t.note_count,children:null===(a=t.children)||void 0===a?void 0:a.map(e)}}))}}();e(m.a.t("successMsg"));new d.Sunburst("container",{data:t,type:"treemap",reflect:"y",seriesField:"sum",colorField:"label",innerRadius:.3,interactions:[{type:"element-active"}]}).render()}catch(a){t(m.a.t("errorMsg"))}}),n.createElement("div",{id:"container",style:{height:"100vh"}})};const D=[{path:"/setting",component:M.default},{path:"/tag",component:b},{path:"/sunburst",component:P},{path:"/relation",component:E},{path:"/demo/create-note",component:z},{path:"/",component:T}];var B,G,V=a(455);class Q{constructor(e){this.storage=e,this.clear=()=>{this.storage.clear()},this.getItem=e=>this.storage.getItem(e),this.key=e=>this.storage.key(e),this.removeItem=e=>{this.storage.removeItem(e)},this.setItem=(e,t)=>{this.storage.setItem(e,t)}}get length(){return this.storage.length}}const $=function(e){const t=new Set(["storage","length","clear","getItem","setItem","removeItem","key"]);return new Proxy(new Q(e),{get(e,a,n){if(t.has(a))return Reflect.get(e,a,n);try{return JSON.parse(e.getItem(a.toString()))}catch(r){return null}},set:(e,a,n,r)=>t.has(a)?Reflect.set(e,a,r):(e.setItem(a.toString(),void 0!==n&&null!==n?JSON.stringify(n):n),!0)})}(localStorage);l.a.token=null===(B=$.settingForm)||void 0===B?void 0:B.token,l.a.port=null===(G=$.settingForm)||void 0===G?void 0:G.port;var A=()=>{const[e]=Object(V.a)("settingForm"),t=Object(i.f)();return Object(g.a)(()=>{(null===e||void 0===e?void 0:e.token)&&(null===e||void 0===e?void 0:e.port)||t.push("/setting")}),Object(c.a)(D)},K=(a(448),a(502)),U=a(164);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K.a,{locale:window.navigator.language},r.a.createElement(_.a,{maxSnack:3},r.a.createElement(U.a,null,r.a.createElement(A,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(105);function r(){const e=Object(n.b)();return{success(t){e.enqueueSnackbar(t,{variant:"success",autoHideDuration:3e3})},error(t){e.enqueueSnackbar(t,{variant:"error",autoHideDuration:3e3})}}}}},[[305,1,2]]]);
//# sourceMappingURL=main.db3e6bc2.chunk.js.map